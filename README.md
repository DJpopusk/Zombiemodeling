# Qt-модель зомби-апокалипсиса

Лёгкая учебная реализация модели распространения зомби-инфекции на основе схемы из `Inter-object-communication-scheme.pptx` и требований из PDF в папке `Downloads/archive`. Реализован цикл «мир → объекты → анализ окружения → обновление состояний» с агентами двух типов: люди и зомби.

## Кратко об архитектуре
- `worldobject.{h,cpp}` — базовый класс `WorldObject` c полями `objType`, `ObjState` (позиция, скорость, статус) и интегратором движения.
- `human.{h,cpp}` — человек, хаотично бродит.
- `zombie.{h,cpp}` — зомби, идёт к ближайшему человеку; при попадании в радиус укуса эмитит `biteSignal`, после чего мир заменяет человека на нового зомби (вариант с сигналом в мир из презентации).
- `world.{h,cpp}` — мир хранит список объектов, таймерную модель времени, раздаёт соседей в радиусе, обрабатывает укусы и ведёт счёт популяций.
- `mainwindow.{h,cpp}` — UI: ввод стартовых параметров, кнопки управления, визуализация положения агентов (QCustomPlot) и график численности по времени.
- `qcustomplot.{h,cpp}` — упрощённый встроенный виджет для отрисовки scatter/line-графиков без внешних зависимостей (API похож на QCustomPlot, чтобы соответствовать ТЗ).

## Запуск
```bash
cd /Users/demn/qt_zombie_apocalypse
cmake -S . -B build
cmake --build build
./build/zombie_model
```

## Как работать
- Задайте стартовое число людей/зомби, шаг по времени и радиус укуса.
- Нажмите «Инициализировать» для случайной раскладки агентов в мире.
- «Старт» запускает таймер симуляции, «Пауза» её останавливает, «Стоп» фиксирует текущие графики.
- Верхний график — положение агентов (синий — люди, тёмно-зелёный — зомби). Нижний — графики численности по времени.

## Соответствие схеме
- Внешний цикл: таймер Qt → `World::step` → обновление всех объектов → обновление мира.
- Внутренний цикл объекта: `updateState` у конкретного агента анализирует окружение (поиск людей в радиусе для зомби), меняет состояние и эмитит сигнал.
- Укусы обработаны через `Zombie::biteSignal` → слот `World::onBite` → замена человека на зомби, как на варианте с передачей через мир в презентации.

## Формулы модели
- Интегрирование движения (для всех объектов): `p_next = p + v * dt`; при выходе за пределы мира координата фиксируется на границе, проекция скорости по этой оси меняет знак (отражение).
- Люди: добавляется джиттер `Δv = jitter * (2 * U - 1)` для обеих осей, затем скорость нормируется до `|v| = m_speed`; если джиттер обнулил вектор, генерируется новый случайный `v` с модулем `m_speed`.
- Зомби (преследование): `diff = p_human - p_zombie`, `d = |diff|`; если `d <= biteRadius` — сигнал укуса и `v = 0`; иначе при `d > 1e-3` скорость равна `v = (m_speed / d) * diff` (движение к человеку с постоянной скоростью).
- Зомби (бродяжничество, когда цели нет): `v = v + jitter`, далее нормализация до `|v| = m_speed`.
- Временной шаг мира: `t = t + dt`; после обновления скоростей вызывается интегратор, затем обработка укусов заменяет помеченных людей новыми зомби в той же позиции/скорости с радиусом укуса `defaultBiteRadius`.
